 <!DOCTYPE html>
<html>
<body>

 
 <script>

// convert a Unicode string to a string in which
// each 16-bit unit occupies only one byte
function toBinary(string) {
  const codeUnits = new Uint16Array(string.length);
  for (let i = 0; i < codeUnits.length; i++) {
    codeUnits[i] = string.charCodeAt(i);
  }
  const charCodes = new Uint8Array(codeUnits.buffer);
  let result = '';
  for (let i = 0; i < charCodes.byteLength; i++) {
    result += String.fromCharCode(charCodes[i]);
  }
  return result;
}  
  
  
  /**
 * encode via diacritics
 */
function encode() {
 string=document.getElementById("basetext").value
 hiddenstring=toBinary(document.getElementById("hiddentext").value)
 
   const codeUnits = new Uint16Array(hiddenstring.length);
  for (let i = 0; i < codeUnits.length; i++) {
    codeUnits[i] = hiddenstring.charCodeAt(i);
  }
  const charCodes = new Uint8Array(codeUnits.buffer);

 
 
  // Use the Unicode block for combining diacritics.
  // https://en.wikipedia.org/wiki/Combining_Diacritical_Marks
  const blockRangeMin = 0x0300
  //const blockRangeMax = 0x036F;
  //const blockRangeSize = blockRangeMax - blockRangeMin;

  // Build up a list of letters.
  let result = "";
  for (let i = 0; i < charCodes.byteLength; i++) {
    const base112=parseInt(charCodes[i],112);
    for (const base112letter of base112.split(""){
     const codePoint = blockRangeMin+base112letter;
     result +='a';
     result += String.fromCodePoint(codePoint);
  }
 }
 
document.getElementById("combinedtext").value = result;
  //return result;
}

  
</script>
 
<h1>StegaMark</h1>
<p>text that will be the base to add hidden text</p>
 <textarea id="basetext" name="basetext" rows="4" cols="50" onkeyup="encode(); return false;"></textarea>
  <br><br>
<p>text that will be the hidden within base text</p>
 <textarea id="hiddentext" name="hiddentext" rows="4" cols="50" onkeyup="encode(); return false;"></textarea>
  <br><br>
<p>combined text</p>
 <textarea id="combinedtext" name="combinedtext" rows="4" cols="50"></textarea>
  <br><br>

</body>
</html> 
